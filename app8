import React, { useState } from "react";

// ✅ Componente Welcome
function Welcome({ name = "Guest" }) {
  return <p>Welcome, <strong>{name}</strong>!</p>;
}

// ✅ Componente InteractiveWelcome
function InteractiveWelcome() {
  const [name, setName] = useState("");

  const handleChange = (event) => {
    setName(event.target.value);
  };

  return (
    <div>
      <h2>Interactive Welcome</h2>
      <input
        type="text"
        value={name}
        onChange={handleChange}
        placeholder="Enter your name"
      />
      <Welcome name={name} />
    </div>
  );
}

// ✅ Componente Login
function Login({ onLogin }) {
  const [formData, setFormData] = useState({
    username: "",
    password: "",
    remember: false,
  });

  // Gestore per tutti gli input
  const handleChange = (event) => {
    const { name, value, type, checked } = event.target;

    setFormData((prevData) => ({
      ...prevData,
      [name]: type === "checkbox" ? checked : value,
    }));
  };

  // Gestore per il login
  const handleLogin = () => {
    onLogin(formData);
  };

  // Gestore per il reset
  const handleReset = () => {
    setFormData({
      username: "",
      password: "",
      remember: false,
    });
  };

  // Disabilita il pulsante se username o password sono vuoti
  const isLoginDisabled = !formData.username || !formData.password;

  return (
    <div>
      <h2>Login</h2>

      <div>
        <label>
          Username:{" "}
          <input
            type="text"
            name="username"
            value={formData.username}
            onChange={handleChange}
            placeholder="Enter username"
          />
        </label>
      </div>

      <div>
        <label>
          Password:{" "}
          <input
            type="password"
            name="password"
            value={formData.password}
            onChange={handleChange}
            placeholder="Enter password"
          />
        </label>
      </div>

      <div>
        <label>
          Remember me{" "}
          <input
            type="checkbox"
            name="remember"
            checked={formData.remember}
            onChange={handleChange}
          />
        </label>
      </div>

      <button onClick={handleLogin} disabled={isLoginDisabled}>
        Login
      </button>
      <button onClick={handleReset}>Reset</button>
    </div>
  );
}

// ✅ Componente principale App
function App() {
  const handleLogin = (userData) => {
    console.log("Login data:", userData);
  };

  return (
    <div>
      <h1>React Controlled Components</h1>
      <InteractiveWelcome />
      <hr />
      <Login onLogin={handleLogin} />
    </div>
  );
}

export default App;