import React, { useState, useEffect } from "react";

// âœ… Componente CounterDisplay per mostrare il valore del contatore
function CounterDisplay({ count }) {
  return <h2>{count}</h2>;
}

// âœ… Componente Counter
function Counter({ initialValue = 0, increment = 1 }) {
  const [counter, setCounter] = useState(initialValue);

  // ðŸ§  useEffect per stampare il valore corrente del contatore nella console
  useEffect(() => {
    console.log("Valore corrente del contatore:", counter);
  }, [counter]); 
  // ðŸ‘† Lâ€™effetto si esegue ogni volta che `counter` cambia

  const handleIncrement = () => {
    // âœ… Si usa una funzione nel setter perchÃ© dipende dal valore precedente
    setCounter(prev => prev + increment);
  };

  const handleDecrement = () => {
    setCounter(prev => prev - increment);
  };

  const handleReset = () => {
    setCounter(initialValue);
  };

  return (
    <div>
      <CounterDisplay count={counter} />
      <button onClick={handleIncrement}>Incrementa +{increment}</button>
      <button onClick={handleDecrement}>Decrementa -{increment}</button>
      <button onClick={handleReset}>Reset</button>
    </div>
  );
}

// âœ… Componente Clock
function Clock() {
  const [time, setTime] = useState(new Date());

  useEffect(() => {
    // Aggiorna l'orario ogni secondo
    const intervalId = setInterval(() => {
      setTime(new Date());
    }, 1000);

    // ðŸ§¹ Pulizia dellâ€™intervallo quando il componente viene smontato
    return () => clearInterval(intervalId);
  }, []);

  return (
    <div>
      <h2>Ora corrente: {time.toLocaleTimeString()}</h2>
    </div>
  );
}

// âœ… Componente principale App
function App() {
  return (
    <div>
      <h1>Esercizio React con useState e useEffect</h1>
      <Counter initialValue={0} increment={1} />
      <hr />
      <Clock />
    </div>
  );
}

export default App;